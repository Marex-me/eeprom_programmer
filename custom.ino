#define SHIFT_DATA 2
#define SHIFT_CLK 3
#define SHIFT_DISPL 4
#define WRITE_ENABLE 5

// data for rows and columns
byte rData[] = { 0x80, 0x84, 0x82, 0x86, 0x81, 0x85, 0x83, 0x87, 0x40, 0x44, 0x42, 0x46, 0x41, 0x45, 0x43, 0x47, 0x20, 0x24, 0x22, 0x26, 0x21, 0x25, 0x23, 0x27, 0x10, 0x14, 0x12, 0x16, 0x11, 0x15, 0x13, 0x17, 0x8, 0xC, 0xA, 0xE, 0x9, 0xD, 0xB, 0xF };
byte cData[] = { 0xBD, 0xC3, 0xA5, 0x3C, 0x3C, 0xBD, 0x81, 0xDB, 0xE7, 0xDB, 0xBD, 0x0, 0xEF, 0xEF, 0xED, 0xF3, 0x99, 0x66, 0x7E, 0x7E, 0x7E, 0xBD, 0xDB, 0xE7, 0xDB, 0xE7, 0xDB, 0xA5, 0x66, 0x66, 0xA5, 0xDB, 0xF7, 0xF3, 0xF5, 0xF6, 0x8F, 0x77, 0x77, 0x8F };

void setup() {
  // pins initial state setup
  pinMode(SHIFT_DATA, OUTPUT);
  pinMode(SHIFT_CLK, OUTPUT);
  pinMode(SHIFT_DISPL, OUTPUT);
  pinMode(WRITE_ENABLE, OUTPUT);
  pinMode(LED_BUILTIN, OUTPUT);
  
  // enable chip write
  digitalWrite(SHIFT_DISPL, LOW);
  digitalWrite(WRITE_ENABLE, HIGH);

  // write each data word
  for (int addIt = 0; addIt < 40; addIt += 1) {
    shiftOut(SHIFT_DATA, SHIFT_CLK, MSBFIRST, cData[addIt]);
    shiftOut(SHIFT_DATA, SHIFT_CLK, MSBFIRST, rData[addIt]);
    digitalWrite(SHIFT_DISPL, HIGH);
    digitalWrite(SHIFT_DISPL, LOW);
    delay(100);
    digitalWrite(WRITE_ENABLE, LOW);
    delay(1);
    digitalWrite(WRITE_ENABLE, HIGH);
    delay(100);
  }

  // blink build-in LED after data write
  for (int i = 0; i < 5; i += 1) {
    digitalWrite(LED_BUILTIN, HIGH);
    delay(500);
    digitalWrite(LED_BUILTIN, LOW);
    delay(500);
  }
}

void loop() {
}

